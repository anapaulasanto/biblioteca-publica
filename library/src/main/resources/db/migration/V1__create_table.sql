-- public.tb_category definição

-- Drop table

-- DROP TABLE public.tb_category;

CREATE TABLE public.tb_category (
	id int8 GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 9223372036854775807 START 1 CACHE 1 NO CYCLE) NOT NULL,
	category_code int4 NULL,
	category_name varchar(150) NOT NULL,
	category_popularity int4 NOT NULL,
	description varchar(255) NULL,
	CONSTRAINT tb_category_pkey PRIMARY KEY (id),
	CONSTRAINT ukoto9w5xy9wtrpiom43hp0uvhq UNIQUE (category_code)
);


-- public.tb_user definição

-- Drop table

-- DROP TABLE public.tb_user;

CREATE TABLE public.tb_user (
	id int8 GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 9223372036854775807 START 1 CACHE 1 NO CYCLE) NOT NULL,
	email varchar(255) NULL,
	login varchar(255) NULL,
	"name" varchar(150) NOT NULL,
	"password" varchar(255) NULL,
	created_at timestamp(6) NULL,
	updated_at timestamp(6) NULL,
	CONSTRAINT tb_user_pkey PRIMARY KEY (id),
	CONSTRAINT ukqht682qvopcx5f41dc2rbs5jf UNIQUE (login)
);


-- public.tb_book definição

-- Drop table

-- DROP TABLE public.tb_book;

CREATE TABLE public.tb_book (
	id int8 GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 9223372036854775807 START 1 CACHE 1 NO CYCLE) NOT NULL,
	author varchar(255) NULL,
	isbn varchar(255) NULL,
	title varchar(150) NOT NULL,
	"year" int4 NOT NULL,
	category_id int8 NULL,
	CONSTRAINT tb_book_pkey PRIMARY KEY (id),
	CONSTRAINT uknwiginjq083ju0voqstci2qvd UNIQUE (isbn),
	CONSTRAINT fkciuinldyblgvrg7ef6sksof8b FOREIGN KEY (category_id) REFERENCES public.tb_category(id)
);


-- public.tb_rental definição

-- Drop table

-- DROP TABLE public.tb_rental;

CREATE TABLE public.tb_rental (
	id int8 GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 9223372036854775807 START 1 CACHE 1 NO CYCLE) NOT NULL,
	notes varchar(150) NULL,
	rental_date varchar(255) NOT NULL,
	return_date varchar(255) NULL,
	status varchar(255) NULL,
	user_id int8 NOT NULL,
	book_id int8 NOT NULL,
	CONSTRAINT tb_rental_pkey PRIMARY KEY (id),
	CONSTRAINT fkhkns9rpw9xaijruj4uu0wvie6 FOREIGN KEY (book_id) REFERENCES public.tb_book(id),
	CONSTRAINT fkiy9hj26mfc96gx23aqogcrx2u FOREIGN KEY (user_id) REFERENCES public.tb_user(id)
);


-- public.tb_review definição

-- Drop table

-- DROP TABLE public.tb_review;

CREATE TABLE public.tb_review (
	id int8 GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 9223372036854775807 START 1 CACHE 1 NO CYCLE) NOT NULL,
	"comment" varchar(450) NULL,
	rating float8 NOT NULL,
	review_date date NULL,
	reviewer_name varchar(255) NULL,
	book_id int8 NOT NULL,
	user_id int8 NOT NULL,
	CONSTRAINT tb_review_pkey PRIMARY KEY (id),
	CONSTRAINT fkp5tb2jvweeb394ipb13b1my8v FOREIGN KEY (book_id) REFERENCES public.tb_book(id),
	CONSTRAINT fkqeh83gbufxg1ft0ubwn7w0tty FOREIGN KEY (user_id) REFERENCES public.tb_user(id)
);
